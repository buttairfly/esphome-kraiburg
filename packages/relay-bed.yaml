substitutions:
  # needed substitutions:
  # id:

switch:
  - platform: template
    name: ${name_verbose} Bed Light
    id: ${id}_bed_light
    icon: mdi:bed-double
    turn_on_action:
      - switch.turn_on: ${id}_relay1
      - switch.turn_on: ${id}_relay2
    turn_off_action:
      - switch.turn_off: ${id}_relay1
      - switch.turn_off: ${id}_relay2
  - platform: gpio
    name: ${name_verbose} Bed Light Max
    id: ${id}_relay1
    icon: mdi:bed-double-outline
    pin:
      number: GPIO3
      inverted: true
    restore_mode: ALWAYS_OFF
    device_class: switch
    on_turn_on:
      - if:
          condition:
            switch.is_on: ${id}_relay2
          then:
            - lambda: id(${id}_bed_light).publish_state(true);
    on_turn_off:
      - if:
          condition:
            switch.is_off: ${id}_relay2
          then:
            - lambda: id(${id}_bed_light).publish_state(false);
  - platform: gpio
    name: ${name_verbose} Bed Light Ela
    id: ${id}_relay2
    icon: mdi:bed-double-outline
    pin:
      number: GPIO4
      inverted: true
    restore_mode: ALWAYS_OFF
    device_class: switch
    on_turn_on:
      - if:
          condition:
            switch.is_on: ${id}_relay1
          then:
            - lambda: id(${id}_bed_light).publish_state(true);
    on_turn_off:
      - if:
          condition:
            switch.is_off: ${id}_relay1
          then:
            - lambda: id(${id}_bed_light).publish_state(false);
  - # currently unused relay
    platform: gpio
    name: Relay3
    id: ${id}_relay3
    icon: mdi:electric-switch
    pin:
      number: GPIO1
      inverted: true
    restore_mode: ALWAYS_OFF
    device_class: switch
    internal: true
  - # currently unused relay
    platform: gpio
    name: Relay4
    id: ${id}_relay4
    icon: mdi:electric-switch
    pin:
      number: GPIO0
      inverted: true
    restore_mode: ALWAYS_OFF
    device_class: switch
    internal: true
